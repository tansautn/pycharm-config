<application>
  <component name="PromptTemplates">
    <option name="builtInPromptOverrides">
      <list>
        <BuiltInPromptOverride>
          <option name="groupId" value="rules" />
          <option name="promptId" value="ide" />
          <option name="text" value="# PySide6 Project Rules&#10;&#10;## 1) UI-First Workflow (Mandatory)&#10;- All user-facing UI must be designed in Qt Designer first and saved as raw `.ui` files (no Python slots in `.ui`).&#10;- Keep `.ui` files as the single source of truth for layout and widget tree.&#10;- After any `.ui` change, compile UI to Python with:&#10;  ```bash&#10;  python scripts/compile_ui.py&#10;  ```&#10;- Never hand-edit generated UI Python files; edit only the corresponding controller/component files.&#10;&#10;## 2) Architecture &amp; Responsibilities&#10;- Controllers extend `core.BaseController` and only wire UI to events via `slot_map`.&#10;    + Inherits orders: 1st: UI class, 2nd: BaseController&#10;    + Never call `setupUi` in `__init__`, cause `BaseController` was called in super().__init__()&#10;- Handlers extend `core.Observer.Subscriber` and implement event logic (`on_&lt;event&gt;` methods). Keep business logic out of controllers.&#10;- Services contain pure, UI-agnostic business logic. Prefer dependency injection and testability.&#10;- Components live under `windows/components/&lt;ComponentName&gt;/` with this structure:&#10;  - `ComponentName.ui` (designer)&#10;  - `ComponentName.py` (generated; do not edit)&#10;  - `ComponentNameWidget.py` (Controller/Widget)&#10;  - `ComponentNameHandler.py` (Handler)&#10;  - `__init__.py`&#10;- Use `WidgetManager` for widget access and signal-suppressed updates.&#10;- Use the Observer (Publisher/Subscriber) for decoupled communication. Do not directly call other controllers.&#10;&#10;## 3) Coding Style&#10;- Follow PEP 8/PEP 257 except naming to align with Qt conventions:&#10;  - Classes/Files: PascalCase (e.g., `MainController.py`)&#10;  - Methods/variables: camelCase&#10;  - Directories: lowercase with underscores (e.g., `windows/main`)&#10;- Maximize readability: small methods, clear names, early returns, no deep nesting.&#10;- Type hints required for public functions/methods.&#10;- Errors must use `core.Exceptions` types; do not catch silently.&#10;&#10;## 4) Logging &amp; Diagnostics&#10;- Use `core.Logging.logger` everywhere (no `print`).&#10;- Log key start/end points of important flows, include contextual data (avoid secrets).&#10;- In async/multithreaded contexts, include identifiers (task id, thread info) in logs when available.&#10;&#10;## 5) ACK Mechanism (If coordination is needed)&#10;- When a task emits events that require downstream processing before cleanup, use the ACK mechanism per `docs/provided-by-base/ACKNOWLEDGMENT_MECHANISM.md`:&#10;  - Emit events via `TaskServiceWithAck.emit_event_with_ack(...)`.&#10;  - Handlers process with `HandlerServiceWithAck.handle_with_ack(...)`.&#10;  - Task services must `wait_for_acknowledgments(...)` before resource cleanup (e.g., closing browser).&#10;- Share a single `AcknowledgmentTracker` between sender/receiver in the same workflow.&#10;&#10;## 6) Testing&#10;- Use the provided pytest setup in `tests_auto/` (see `TESTING_SETUP.md`).&#10;- Write unit tests for core logic (services, ack layer) and integration tests for critical flows.&#10;- Commands:&#10;  ```bash&#10;  pytest&#10;  pytest --cov=core --cov=services --cov-report=html&#10;  ```&#10;&#10;## 7) Scripts &amp; Scaffolding&#10;- Generate controllers/services/components via `scripts/generate.py` when possible to ensure consistency.&#10;- Re-run `scripts/compile_ui.py` after adding/editing `.ui` files.&#10;&#10;## 8) File/Module Conventions&#10;- Keep controller/handler pairs per window/component; do not mix service logic into controllers.&#10;- Ensure each module/package has `__init__.py` as needed and exports intended classes.&#10;- Keep generated files out of VCS if configured; never hand-edit generated code.&#10;&#10;## 9) External Libraries &amp; Docs&#10;- Before integrating a new library/feature, review its official docs (Context7/web) and add brief notes to `docs/` if behavior affects architecture.&#10;- Prefer existing helpers/services documented under `docs/provided-by-base/` before introducing new dependencies.&#10;&#10;## 10) Security &amp; Secrets&#10;- Do not log credentials, tokens, or PII.&#10;- Centralize configuration via `core.Config`; never hardcode secrets.&#10;&#10;## 11) Definition of Done (UI/Feature)&#10;- `.ui` exists and compiles cleanly.&#10;- Controller/Handler implemented with `slot_map` and Observer wiring.&#10;- Service code covered by tests; critical flows have integration tests.&#10;- No direct edits to generated UI code; logging in place; exceptions typed.&#10;- Documentation snippet added/updated in `docs/` if behavior is non-trivial.&#10;" />
        </BuiltInPromptOverride>
      </list>
    </option>
  </component>
</application>